<!DOCTYPE html>
<html>
<head>
    <title>Official Content Page</title>
    <link rel="stylesheet" href="./css/style.css">
    <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
</head>
<body class="victim-body">
    <div id="main-content">
        <h1>Welcome to our official portal</h1>
        <p>Browsing content... please wait.</p>
    </div>

    <!-- Resized and specifically positioned icons -->
    <div id="victim-desktop" style="display:none;">
        <img id="v-file" src="./images/file.png" style="width:40px; position:absolute; top:20px; left:20px; transition: all 1s ease;">
        <img id="v-bin" src="./images/bin.png" style="width:40px; position:absolute; bottom:20px; right:20px;">
    </div>

    <div id="alert-overlay">
        <h1 id="alert-msg"></h1>
    </div>

    <img id="fake-cursor" src="https://cur.cursors-4u.net/arrow/arrow-1.png" style="position:fixed; display:none; width:20px; z-index:10001; pointer-events:none;">

    <script>
        // REPLACE THE URL BELOW WITH YOUR HOSTED BACKEND
        const socket = io('https://your-back-end-service.onrender.com'); 
        socket.emit('join', 'viewer');

        const overlay = document.getElementById('alert-overlay');
        const desktop = document.getElementById('victim-desktop');
        const cursor = document.getElementById('fake-cursor');
        const fileIcon = document.getElementById('v-file');

        socket.on('exec-prank', (data) => {
            if (['custom', 'red', 'windows'].includes(data.type)) {
                overlay.style.display = 'block';
                if(data.type === 'red') {
                    overlay.className = 'red-screen';
                    document.getElementById('alert-msg').innerText = "CRITICAL MALWARE DETECTED!";
                } else if (data.type === 'windows') {
                    overlay.className = 'blue-screen';
                    document.getElementById('alert-msg').innerHTML = "Updating Windows...<br>99% Complete";
                } else {
                    overlay.className = 'blue-screen';
                    document.getElementById('alert-msg').innerText = data.msg;
                }
            } else if (data.type === 'clear') {
                overlay.style.display = 'none';
            } else if (data.type === 'set-mouse-state') {
                desktop.style.display = data.active ? 'block' : 'none';
                cursor.style.display = data.active ? 'block' : 'none';
            } else if (data.type === 'delete-files') {
                // Animation: File slides to the bin and fades out
                fileIcon.style.top = "calc(100% - 60px)";
                fileIcon.style.left = "calc(100% - 60px)";
                fileIcon.style.opacity = "0";
            }
        });

        socket.on('mouse-sync', (coords) => {
            cursor.style.left = coords.x + 'px';
            cursor.style.top = coords.y + 'px';
        });
    </script>
</body>
</html>
