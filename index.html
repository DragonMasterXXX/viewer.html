<!DOCTYPE html>
<html>
<head>
    <title>Official Content Page</title>
    <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
    <style>
        body.victim-body { margin: 0; padding: 20px; font-family: sans-serif; background: #fff; overflow: hidden; }
        #alert-overlay { 
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
            z-index: 10000; text-align: center; padding-top: 25vh; 
        }
        .blue-screen { background: #0078d7; color: white; font-family: 'Segoe UI', sans-serif; }
        .red-screen { background: #aa0000; color: white; }
        
        #fake-cursor { position: fixed; display: none; width: 22px; pointer-events: none; z-index: 10001; }
        
        /* Victim Desktop Icons */
        #v-file { position: absolute; top: 20px; left: 20px; width: 40px; }
        #v-bin { position: absolute; bottom: 20px; right: 20px; width: 40px; }
        #victim-desktop { display: none; }
    </style>
</head>
<body class="victim-body">
    <div id="main-content">
        <h1>Welcome to our official portal</h1>
        <p>Browsing content... please wait.</p>
    </div>

    <div id="victim-desktop">
        <img id="v-file" src="images/file.png" alt="Files">
        <img id="v-bin" src="images/bin.png" alt="Bin">
    </div>

    <div id="alert-overlay">
        <h1 id="alert-msg" style="font-size: 40px;"></h1>
    </div>

    <img id="fake-cursor" src="https://cur.cursors-4u.net/arrow/arrow-1.png">

    <script>
        const socket = io('https://your-back-end-service.onrender.com'); 
        socket.emit('join', 'viewer');

        const overlay = document.getElementById('alert-overlay');
        const desktop = document.getElementById('victim-desktop');
        const cursor = document.getElementById('fake-cursor');
        const fileIcon = document.getElementById('v-file');

        socket.on('exec-prank', (data) => {
            if (['custom', 'red', 'windows'].includes(data.type)) {
                overlay.style.display = 'block';
                if(data.type === 'red') {
                    overlay.className = 'red-screen';
                    document.getElementById('alert-msg').innerText = "CRITICAL MALWARE DETECTED!";
                } else if (data.type === 'windows') {
                    overlay.className = 'blue-screen';
                    document.getElementById('alert-msg').innerHTML = "Updating Windows...<br>99% Complete";
                } else {
                    overlay.className = 'blue-screen';
                    document.getElementById('alert-msg').innerText = data.msg;
                }
            } else if (data.type === 'clear') {
                overlay.style.display = 'none';
            } else if (data.type === 'set-mouse-state') {
                desktop.style.display = data.active ? 'block' : 'none';
                cursor.style.display = data.active ? 'block' : 'none';
            } else if (data.type === 'delete-files') {
                // File flies to bin and vanishes
                fileIcon.style.transition = "all 0.8s ease-in";
                fileIcon.style.top = (window.innerHeight - 60) + "px";
                fileIcon.style.left = (window.innerWidth - 60) + "px";
                fileIcon.style.opacity = "0";
            }
        });

        socket.on('mouse-sync', (coords) => {
            cursor.style.left = coords.x + 'px';
            cursor.style.top = coords.y + 'px';
        });
    </script>
</body>
</html>
